# highload-airbnb

### 1. Тема
* Сервис Airbnb, находящийся в Европе/России

* 150 миллионов пользователей
* Основная аудитория находится в Европе и России
* 2 миллиона одновременных пользователей
* 518 тысяч объявлений в день

### 2. Определение возможного диапазона нагрузок подобного проекта
* Месячная аудитория - 100 миллионов пользователей в месяц, 
среднее время проведения на сайте 11 минут 31 секунду
[Источник](https://ipropertymanagement.com/research/airbnb-statistics)

### 3. Планируемая нагрузка

Планируемая нагрузка - 100% от нагрузки Airbnb , т.е.
100 миллионов пользователей в месяц.

По статистике средняя продолжительность ренты составляет 4.3 дня [Источник](https://ipropertymanagement.com/research/airbnb-statistics)
Пользователь, уже получивший жилье вряд ли будет искать во время проживания снова, поэтому
пользователь активно меняющий жилье будет возвращаться на сайт в течение месяца ~7 раз, 
значит ежедневная аудитория будет равняться  100/7 = 14.2 миллионов  пользователей 

Теперь рассчитаем трафик среднестатистического пользователя за одну сессию

За 2 минуты  пользования сайтом:
На динамику:  
* 7 мб и 200 запросов

Основной объем трафика пришелся на статику
На статику: 
*  На картинки: 14.2 мб и 580 запросов.
* На остальную статику: 8 мб  Мб и 245 запросов.
* Всего 22.2 мб 580+245= 825 запросов.

За сутки пользования сервисом в среднем пользователем будет израсходовано 5.75
* Для динамики 7 * (11.5/2) = 40.25 мб
200 * (11.5/2) = 1150 запросов

* Для картинок 14.2 * (11.5/2) = 81.65 мб
580 * (11.5/2) = 3335 запросов

* На остальную статику 8 * (11.5/2) = 46 мб 
245  * (11.5/2) = 1409 запросов

Расcчитаем средний трафик для динамики и статики: 
- Динамика: (40.25 мб * 14 200 000) * 8/1024 / (24 * 60 * 60) = 51.68 Гбит/с
- Картинки: (81.65 мб * 14 200 000) * 8/1024 / (24 * 60 * 60) = 104.83 Гбит/c
- Остальная статика: (46 мб * 14 200 000) * 8/1024 / (24 * 60 * 60) = 59,06 Гбит/c

Расcчитаем средний RPS для динамики и статики: 
- Динамика: (1150 * 14 200 000) / (24 * 60 * 60) = 189 000 RPS
- Картинки: (3335 * 14 200 000) / (24 * 60 * 60) =  548 113 RPS
- Остальная статика: (1409 * 14 200 000) / (24 * 60 * 60) = 231 571 RPS



